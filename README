# Workflow1

# Description: Contains applications neeed for a regional loss estimaion
# due to an earthquake event. Applications in subdirectories:

1. UrbanSimDatabase - given UrbanSim data generate BIM models
2. LLNL-SW4 - given BIM model get input motion for building from a directory containing results of a simulated event
3. createSAM -  given BIM and EVENT use Hazus data to generate a shear model - AI-M-3 application!
4. createEDP - given the inputs so far generate the EDP demands
5. performSIMULATION - given all, pre and post processors to fill the EDP with data
6. performUQ - given all, pre and post processors to call dakota
7. createDL - given all, determine the DL, DL-1 application!

NOTE: the applications require the jansson lib be installed. jansson is 
a free BSD lib recomended online for dealing with reading/writing json files.
It is assumed installed in /usr/local/jansson as seen in Makefiles.

NOTE: each subsirectory included provides an application and include example 
input and output .json (the input coming from previous step, the output 
generated by the application given the inputs)

NOTE: running an application w/o any inputs shows what the command line args
should be.

NOTE: the buildings.csv and parcesls.csv files needed to run are not included in repository till we can remove some data that we cannot release. contact us.

NOTE: similarly for the ground motion files.

## SW4 - 

Directory processSW4 contains code to process SW4 .x,.y,and .z files into 1 .json file


## Pegasus Workflow

The Pegasus workflow can be found in the workflow/ directory. 

Before submitting, please run `make` to make sure all the executables
required by the workflow have been built.

The workflow is set up to execute in two different execution
environments: local HTCondor pool, Stampede 2 or TACC Wrangler. The first
is good for small to medium sized runs as turnaround time is usually
pretty good. Large workflows should be mapped to TACC Wrangler.

Submitting a workflow for local HTCondor pool execution can be done
by executing:

    ./submit-workflow

Submitting to TACC Stampede2 can be done on the workflow.isi.edu host
with the command:

    ./submit-workflow stampede2
    ./submit-workflow wrangler


